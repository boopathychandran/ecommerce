{% extends "base.html" %}
{% load static %}

{% block title %}Profile | Chandran Electronics{% endblock %}

{% block content %}
<div class="container" style="padding: 4rem 2rem;">
    <div class="animate-in">
        <h1 class="section-title" style="margin-bottom: 2rem;">Identity Profile</h1>

        <div class="feature-card"
            style="max-width: 800px; margin: 0 auto; width: 100%; align-items: stretch; gap: 2.5rem;">
            <!-- Photo & Basic Info -->
            <div style="text-align: center; border-bottom: 1px solid rgba(0,0,0,0.05); padding-bottom: 2rem;">
                <div style="position: relative; display: inline-block;">
                    {% if profile.profile_photo %}
                    <img src="{{ profile.profile_photo.url }}" alt="Profile"
                        style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid white; box-shadow: var(--shadow-lg);">
                    {% else %}
                    <div
                        style="width: 150px; height: 150px; border-radius: 50%; background: #f1f5f9; display: flex; align-items: center; justify-content: center; margin: 0 auto; border: 4px solid white; box-shadow: var(--shadow-lg);">
                        <span class="material-icons" style="font-size: 5rem; color: #cbd5e1;">person</span>
                    </div>
                    {% endif %}
                </div>
                <h2 style="font-family: var(--font-heading); margin-top: 1.5rem; color: var(--text-main);">{{
                    user.get_full_name|default:user.username }}</h2>
                <p style="color: var(--text-muted); font-family: var(--font-body); font-weight: 500;">Member since {{
                    user.date_joined|date:"F Y" }}</p>

                {% if profile.loyalty_points %}
                <div style="margin-top: 1rem;">
                    <span class="loyalty-badge"
                        style="background: var(--gradient-primary); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem;">
                        {{ profile.loyalty_points }} Loyalty Points
                    </span>
                </div>
                {% endif %}
            </div>

            <!-- Details Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                <div class="info-group">
                    <label
                        style="display: block; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; font-weight: 700;">Username</label>
                    <div style="font-weight: 600; color: var(--text-main); font-size: 1.1rem;">@{{ user.username }}
                    </div>
                </div>

                <div class="info-group">
                    <label
                        style="display: block; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; font-weight: 700;">Email
                        Address</label>
                    <div style="font-weight: 600; color: var(--text-main); font-size: 1.1rem;">{{
                        user.email|default:"Not provided" }}</div>
                </div>

                <div class="info-group">
                    <label
                        style="display: block; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; font-weight: 700;">Phone
                        Number</label>
                    <div style="font-weight: 600; color: var(--text-main); font-size: 1.1rem;">{{
                        profile.phone_number|default:"Not linked" }}</div>
                </div>

                <div class="info-group" style="grid-column: 1 / -1;">
                    <label
                        style="display: block; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; font-weight: 700;">Shipping
                        Address</label>
                    <div style="font-weight: 600; color: var(--text-main); font-size: 1.1rem; line-height: 1.5;">
                        {{ profile.address|default:"No address saved" }}{% if profile.city %}, {{ profile.city }}{%
                        endif %}{% if profile.pincode %} - {{ profile.pincode }}{% endif %}
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
                <a href="{% url 'edit_profile' %}" class="btn-primary" style="text-decoration: none; max-width: 250px;">
                    <span class="material-icons">edit</span> Edit Profile
                </a>
                <a href="{% url 'password_change' %}" class="btn-secondary"
                    style="text-decoration: none; padding: 10px 20px; display: flex; align-items: center; gap: 8px; font-weight: 600;">
                    <span class="material-icons">lock_open</span> Change Password
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}