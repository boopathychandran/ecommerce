{% extends "base.html" %}
{% load static %}

{% block title %}Chandran Electronics - Trending Store{% endblock %}

{% block content %}

<!-- Hero Section with Integrated Search -->
<section class="hero-wrapper animate-in">
  <div class="hero-card">
    <div class="header-container">
      <h2 class="hero-title">Future Tech,<br>Available Today.</h2>
      <p class="hero-subtitle">Experience the next generation of electronics with our curated collection of
        bleeding-edge gadgets.</p>
    </div>
  </div>

  <!-- Floating Search Bar -->
  <div class="search-float-container">
    <form method="GET" action="" class="search-bar-unified">
      <span class="material-icons" style="color: #94a3b8;">search</span>
      <input type="text" name="query" class="search-input" placeholder="Search for 'Quantum Laptop'..."
        value="{{ search_query }}">

      <button type="button" class="btn-search-icon" id="voice-search-btn" style="background: #f1f5f9; color: #64748b;">
        <span class="material-icons">mic</span>
      </button>
      <button type="submit" class="btn-search-icon">
        <span class="material-icons">arrow_forward</span>
      </button>
    </form>
  </div>
</section>

<!-- Features Grid (Bento Style) -->
<div class="features-grid animate-in" style="animation-delay: 0.1s;">
  <div class="feature-card highlight" style="grid-column: span 2;">
    <span class="material-icons" style="font-size: 2rem; margin-bottom: 1rem; color: #d946ef;">bolt</span>
    <h3 style="font-family: var(--font-heading); font-size: 1.5rem; margin: 0 0 0.5rem;">New Arrivals</h3>
    <p class="text-muted" style="color: #cbd5e1;">Check out the latest drops from the Quantum Series.</p>
    <button class="btn-primary" style="margin-top: auto; background: rgba(255,255,255,0.1);">Shop Now</button>
  </div>
  <div class="feature-card">
    <span class="material-icons" style="font-size: 2rem; margin-bottom: 1rem; color: #06b6d4;">eco</span>
    <h3 style="font-family: var(--font-heading); margin: 0 0 0.5rem;">Eco-Friendly</h3>
    <p class="text-muted">Sustainable tech for a greener planet.</p>
  </div>
  <div class="feature-card">
    <span class="material-icons" style="font-size: 2rem; margin-bottom: 1rem; color: #f59e0b;">local_offer</span>
    <h3 style="font-family: var(--font-heading); margin: 0 0 0.5rem;">Best Deals</h3>
    <p class="text-muted">Up to 50% off on selected items.</p>
  </div>
</div>

<!-- Products Section -->
<section id="products-section" class="animate-in" style="animation-delay: 0.2s;">
  <div class="section-header">
    <div>
      <h3 class="section-title">Trending Products</h3>
      <p class="text-muted">Curated just for you</p>
    </div>
    <div class="filter-bar">
      <button class="chip active">All</button>
      <button class="chip">Mobile</button>
      <button class="chip">Laptops</button>
      <button class="chip">Accessories</button>
    </div>
  </div>

  {% include 'login/partials/product_grid.html' %}
</section>

<!-- Trending Bottom CTA -->
<section class="home-bottom-cta animate-in"
  style="animation-delay: 0.3s; margin-top: 4rem; padding: 6rem 2rem; background: var(--gradient-primary); border-radius: 40px 40px 0 0; text-align: center; color: white; position: relative; overflow: hidden;">
  <div
    style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'); opacity: 0.05;">
  </div>
  <div style="position: relative; z-index: 2;">
    <h2 style="font-family: var(--font-heading); font-size: 3rem; font-weight: 800; margin-bottom: 1rem;">Join the
      Future.</h2>
    <p style="font-size: 1.25rem; color: rgba(255,255,255,0.9); max-width: 600px; margin: 0 auto 2.5rem;">
      Be the first to know about new drops and exclusive tech deals in the Quantum Series.
    </p>
    <div style="display: flex; gap: 1rem; justify-content: center;">
      <input type="email" placeholder="Enter your email"
        style="padding: 12px 24px; border-radius: 12px; border: none; width: 300px; font-family: var(--font-body);">
      <button class="chip"
        style="background: white; color: var(--primary); font-weight: 700; border: none; padding: 0 30px;">Subscribe</button>
    </div>
  </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
  /* Minimal Voice Search Script */
  const voiceBtn = document.getElementById('voice-search-btn');
  const searchInput = document.querySelector('input[name="query"]');

  if (('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) && voiceBtn) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.continuous = false; recognition.interimResults = false;

    voiceBtn.onclick = () => {
      voiceBtn.style.color = '#ef4444'; // Red indicator
      recognition.start();
      Swal.fire({
        toast: true, position: 'top-end',
        title: 'Listening...', showConfirmButton: false, timer: 3000
      });
    };

    recognition.onresult = (e) => {
      searchInput.value = e.results[0][0].transcript;
      voiceBtn.style.color = '';
    };
    recognition.onend = () => voiceBtn.style.color = '';
  }
</script>
{% endblock %}