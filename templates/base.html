{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Chandran Electronics{% endblock %}</title>
  <link rel="manifest" href="{% static 'manifest.json' %}">
  <link rel="stylesheet" href="{% static 'css/light-neon.css' %}">
  {% block extra_css %}{% endblock %}
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@500;700&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>

  <!-- Unified Sticky Header -->
  <header class="unified-header">
    <div class="header-container">
      <div class="brand-area">
        <a href="{% url 'ecommerce' %}" class="brand-logo">âš¡ Chandran</a>
      </div>

      <!-- Center Navigate (Desktop) -->
      <nav class="nav-center">
        <a href="{% url 'ecommerce' %}" class="nav-item active">Shop</a>
        <a href="#new" class="nav-item">New Arrivals</a>
        <a href="#trending" class="nav-item">Trending</a>
        <a href="#" class="nav-item">Support</a>
      </nav>

      <!-- User Actions -->
      <div class="user-actions">
        <!-- Theme Toggle -->
        <button id="theme-toggle" class="icon-btn" onclick="toggleDarkMode()" title="Toggle Dark/Light Mode"
          style="border:none; background:transparent; cursor:pointer;">
          <span class="material-icons" id="theme-icon">dark_mode</span>
        </button>

        <a href="{% url 'profile' %}" class="icon-btn" title="Profile">
          <span class="material-icons">person_outline</span>
        </a>
        <a href="{% url 'wishlist' %}" class="icon-btn" title="Wishlist">
          <span class="material-icons">favorite_border</span>
          <span id="wishlist-badge" class="badge-count" {% if wishlist_count == 0 %}style="display:none;" {% endif %}>{{ wishlist_count }}</span>
        </a>
        <a href="{% url 'cart' %}" class="icon-btn" title="Cart">
          <span class="material-icons">shopping_bag</span>
          <span id="cart-badge" class="badge-count" {% if cart_count == 0 %}style="display:none;" {% endif %}>{{ cart_count }}</span>
        </a>
        {% if user.is_authenticated %}
        <form method="post" action="{% url 'logout' %}" style="display:inline;">{% csrf_token %}
          <button type="submit" class="icon-btn" style="border:none; background:transparent; cursor:pointer;"
            title="Logout">
            <span class="material-icons">logout</span>
          </button>
        </form>
        {% else %}
        <a href="{% url 'login' %}" class="icon-btn"
          style="width:auto; padding:0 1rem; border-radius:30px; background:#f1f5f9; font-weight:600; font-size:0.9rem;">
          Login
        </a>
        {% endif %}
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    {% block content %}{% endblock %}
  </main>

  <!-- AI Chatbot Widget -->
  <div class="chat-widget">
    <button class="chat-trigger" id="chat-trigger">
      <span class="material-icons">smart_toy</span>
    </button>
    <div class="chat-window" id="chat-window">
      <div class="chat-header">
        <div class="bot-avatar"><span class="material-icons">bolt</span></div>
        <div style="flex:1">
          <div style="font-weight:800; font-size:1rem; color:white;">Chandran AI</div>
          <div style="font-size:0.75rem; color:#10b981; display:flex; align-items:center; gap:4px;">
            <span style="width:6px; height:6px; background:#10b981; border-radius:50%"></span> Online
          </div>
        </div>
        <button id="close-chat" style="background:transparent; border:none; color:white; cursor:pointer;"><span
            class="material-icons">close</span></button>
      </div>
      <div class="chat-messages" id="chat-messages">
        <div class="message bot">
          Hello! I'm your AI system assistant. How can I help you optimize your tech setup today?
        </div>
      </div>
      <div style="padding:1rem; background:rgba(255,255,255,0.05); border-top:1px solid var(--glass-border);">
        <form id="chat-form" style="display:flex; gap:10px;">
          <input type="text" id="chat-input" placeholder="Ask about products, cart or orders..."
            style="flex:1; background:rgba(0,0,0,0.3); border:1px solid var(--glass-border); color:white; padding:10px 15px; border-radius:12px; outline:none;">
          <button type="submit" class="quantum-btn" style="width:45px; height:45px; border-radius:10px;">
            <span class="material-icons">send</span>
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Minimal Footer -->
  <footer class="site-footer">
    <div class="header-container"
      style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 3rem;">
      <div>
        <h4 style="font-family: var(--font-heading); margin-bottom: 1rem;">Chandran Electronics</h4>
        <p style="line-height: 1.6;">Defining the future of retail with neon speed and
          sustainable tech.</p>
      </div>
      <div>
        <h5 style="margin-bottom: 1rem;">Shop</h5>
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
          <a href="#">All Products</a>
          <a href="#">New Arrivals</a>
          <a href="#">Deals</a>
        </div>
      </div>
      <div>
        <h5 style="margin-bottom: 1rem;">Support</h5>
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
          <a href="#">Order Tracking</a>
          <a href="#">Help Details</a>
          <a href="#">Returns</a>
        </div>
      </div>
      <div>
        <p style="font-size: 0.8rem;">&copy; 2025 Chandran Electronics Inc.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="{% static 'js/lazyload.js' %}"></script>
  <script src="{% static 'js/theme.js' %}"></script>
  <script src="{% static 'js/microinteractions.js' %}"></script>
  <script src="{% static 'js/transitions.js' %}"></script>
  <script src="{% static 'js/chatbot.js' %}"></script>
  {% block extra_js %}{% endblock %}
</body>

</html>

